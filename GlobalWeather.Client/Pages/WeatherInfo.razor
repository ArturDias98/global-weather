@page "/weather"
@using GlobalWeather.Shared.Models.Weather

<PageTitle>Weather</PageTitle>

<MudText Typo="Typo.h4"
         Class="mt-10 mb-5">
    Clima
</MudText>

<MudTextField T="string"
              Value="_name"
              Placeholder="Cidade"
              HelperText="Busque pelo nome da cidade"
              Variant="Variant.Outlined"
              ValueChanged="OnLoadAsync"
              AdornmentIcon="@Icons.Material.Outlined.Search"
              Adornment="Adornment.End">
</MudTextField>

@if (_loading)
{
    <MudProgressLinear Size="Size.Medium"
                       Indeterminate="true"
                       Class="mt-10">
    </MudProgressLinear>
}
else
{
    @if (_cities.Count != 0)
    {
        <MudList T="CityModel">
            @foreach (var city in _cities)
            {
                <MudListItem T="CityModel"
                             OnClick="@(() => OnShowInfo(city))">
                    <ChildContent>
                        <MudStack Class="ml-5">
                            <MudText Typo="Typo.h6">@city.Name</MudText>
                            <MudStack Row="true"
                                      Wrap="Wrap.Wrap">
                                <MudChip T="string"
                                         Variant="Variant.Text"
                                         Color="Color.Info">
                                    Estado: @city.State
                                </MudChip>
                                <MudChip T="string"
                                         Variant="Variant.Text"
                                         Color="Color.Info">
                                    Pa√≠s: @city.Country
                                </MudChip>
                                <MudChip T="string"
                                         Variant="Variant.Text">
                                    Latitude: @city.Latitude.ToString("N3")
                                </MudChip>
                                <MudChip T="string"
                                         Variant="Variant.Text">
                                    Longitude: @city.Longitude.ToString("N3")
                                </MudChip>
                            </MudStack>
                        </MudStack>
                    </ChildContent>
                </MudListItem>
            }
        </MudList>
    }
}