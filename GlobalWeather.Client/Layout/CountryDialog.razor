@using GlobalWeather.Shared.Models.Countries
<MudDialog>
    <DialogContent>
        <MudStack Row="true"
                  Wrap="Wrap.Wrap"
                  Justify="Justify.Center">
            <MudImage Src="@GetCountryImage(Model)"
                      Class="rounded-lg"
                      Height="150"
                      Width="150"
                      ObjectFit="ObjectFit.Cover">
            </MudImage>
            <MudPaper Class="pa-5"
                      Elevation="0">
                <MudStack>
                    <MudText Typo="Typo.h5">
                        @Model.Name.CommonName (@Model.Name.Official)
                    </MudText>
                    <MudText Typo="Typo.h6">Região: @Model.Region</MudText>
                    <MudText Typo="Typo.h6">Capital: @Model.Capital.First()</MudText>
                    <MudText Typo="Typo.h6">População: @Model.Population</MudText>
                    <MudText Typo="Typo.h6">Línguas</MudText>
                    <MudStack Row="true"
                              Wrap="Wrap.Wrap">
                        @foreach (var lang in Model.Languages)
                        {
                            <MudChip T="string">@lang.Value</MudChip>
                        }
                    </MudStack>
                    <MudText Typo="Typo.h6">Continentes</MudText>
                    <MudStack Row="true"
                              Wrap="Wrap.Wrap">
                        @foreach (var continent in Model.Continents)
                        {
                            <MudChip T="string">@continent</MudChip>
                        }
                    </MudStack>
                </MudStack>
            </MudPaper>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="() => Dialog.Close()"
                   Style="text-transform: none">
            Fechar
        </MudButton>
    </DialogActions>
</MudDialog>

@code {

    private static string GetCountryImage(CountryModel country)
    {
        return country.Flags.TryGetValue("png", out var image)
            ? image
            : string.Empty;
    }

    [Parameter] [EditorRequired] public CountryModel Model { get; set; } = null!;
    [CascadingParameter] private MudDialogInstance Dialog { get; set; } = null!;
}